--- scanssh/configure.in~	Sat Aug 10 10:58:49 2002
+++ scanssh/configure.in	Sat Aug 10 10:58:49 2002
@@ -14,19 +14,19 @@
 
 dnl XXX - Solaris sux.
 AC_CHECK_LIB(socket, socket)
-AC_CHECK_LIB(nsl, gethostbyname)
+AC_CHECK_FUNC(gethostbyname, [], [AC_CHECK_LIB(nsl, gethostbyname)])
 
 dnl Checks for libraries.
 AC_REPLACE_FUNCS(inet_aton inet_pton strsep getaddrinfo getnameinfo strlcpy strlcat arc4random)
 needmd5=no
-AC_CHECK_FUNCS(MD5Update, , [needmd5=yes])
+AC_CHECK_FUNCS(MD5Update, [], [needmd5=yes])
 if test $needmd5 = yes; then
-   LIBOBJS="$LIBOBJS md5.o"
+   AC_LIBOBJ(md5)
 fi
 neederr=no
-AC_CHECK_FUNCS(warnx, , [neederr=yes])
+AC_CHECK_FUNCS(warnx, [], [neederr=yes])
 if test $neederr = yes; then
-   LIBOBJS="$LIBOBJS err.o"
+   AC_LIBOBJ(err)
 fi
 
 dnl Checks for libpcap
--- scanssh/Makefile.in~	Sat Aug 10 10:59:48 2002
+++ scanssh/Makefile.in	Sat Aug 10 10:59:48 2002
@@ -35,6 +35,7 @@
 	$(CC) $(LDFLAGS) -o $@ $(OBJS) $(LIBS)
 
 install: scanssh
+	$(INSTALL) -d $(DESTDIR)$(BINDIR) $(DESTDIR)$(MANDIR)/man1
 	$(INSTALL_PROGRAM) -m 755 scanssh $(DESTDIR)$(BINDIR)
 	$(INSTALL_DATA) $(srcdir)/scanssh.1 $(DESTDIR)$(MANDIR)/man1
 
